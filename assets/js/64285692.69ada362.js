"use strict";(self.webpackChunkevantay_com=self.webpackChunkevantay_com||[]).push([[8216],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=u(n),m=o,h=c["".concat(l,".").concat(m)]||c[m]||p[m]||i;return n?a.createElement(h,r(r({ref:t},d),{},{components:n})):a.createElement(h,r({ref:t},d))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},166:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var a=n(7462),o=n(3366),i=(n(7294),n(3905)),r=["components"],s={title:"Ubuntu Cheatsheet"},l=void 0,u={unversionedId:"os-ubuntu-cheatsheet",id:"os-ubuntu-cheatsheet",title:"Ubuntu Cheatsheet",description:"Published on December 24, 2020",source:"@site/docs/os-ubuntu-cheatsheet.md",sourceDirName:".",slug:"/os-ubuntu-cheatsheet",permalink:"/docs/os-ubuntu-cheatsheet",draft:!1,tags:[],version:"current",frontMatter:{title:"Ubuntu Cheatsheet"},sidebar:"docs",previous:{title:"iTerm2 Cheatsheet",permalink:"/docs/iterm2-cheatsheet"},next:{title:"MongoDB Setup",permalink:"/docs/mongodb-setup"}},d={},p=[{value:"Creating a new non-root Sudo user",id:"creating-a-new-non-root-sudo-user",level:2},{value:"Add a new user",id:"add-a-new-user",level:3},{value:"Add user to sudo group",id:"add-user-to-sudo-group",level:3},{value:"Log in to user",id:"log-in-to-user",level:3},{value:"Only allow Key Authentication",id:"only-allow-key-authentication",level:2},{value:"Add Public Key to User",id:"add-public-key-to-user",level:3},{value:"Disable Password Authentication",id:"disable-password-authentication",level:3},{value:"Basic Firewall",id:"basic-firewall",level:2},{value:"Resources",id:"resources",level:2}],c={toc:p};function m(e){var t=e.components,n=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Published on December 24, 2020"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"This document was migrated from ",(0,i.kt)("a",{parentName:"em",href:"https://digipie.github.io/digidocs/os/ubuntu18-04/"},"DigiDocs"))),(0,i.kt)("p",null,"In this section you will find my notes on setting up and securing Ubuntu 18.04. ",(0,i.kt)("a",{parentName:"p",href:"https://www.linux.com/learn/vim-101-beginners-guide-vim"},"Vim")," knowledge is assumed."),(0,i.kt)("h2",{id:"creating-a-new-non-root-sudo-user"},"Creating a new non-root Sudo user"),(0,i.kt)("p",null,"It is recommended to avoid using the root user account on a regular basis as it compromises security and is risky. Instead, create a new user account and add it to the sudo group."),(0,i.kt)("h3",{id:"add-a-new-user"},"Add a new user"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"adduser evan\n")),(0,i.kt)("h3",{id:"add-user-to-sudo-group"},"Add user to sudo group"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"usermod -aG sudo evan\n")),(0,i.kt)("h3",{id:"log-in-to-user"},"Log in to user"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"su evan\n")),(0,i.kt)("h2",{id:"only-allow-key-authentication"},"Only allow Key Authentication"),(0,i.kt)("p",null,"Password-based authentication is susceptible to brute-force attacks. Thus, it is good practice to disable it and only allow key-based authentication."),(0,i.kt)("h3",{id:"add-public-key-to-user"},"Add Public Key to User"),(0,i.kt)("p",null,"As mentioned, usage of the root user account should be avoided. Hence, it is advisable that you add your public key to the user account you created earlier on. It is assumed that you logged into your root account using SSH key."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Create a ",(0,i.kt)("inlineCode",{parentName:"li"},"authorized_keys")," file:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"su evan\ncd ~\nmkdir .ssh\nvim .ssh/authorized_keys\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Insert your public key and save the file with ",(0,i.kt)("inlineCode",{parentName:"li"},":wq!"),". You can copy this from the ",(0,i.kt)("inlineCode",{parentName:"li"},"authorized_keys")," file under the root account's directory. You can find the file using the following commands:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"su root\ncd ~\nvim .ssh/authorized_keys\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Toggle visual mode by pressing ",(0,i.kt)("inlineCode",{parentName:"p"},"v")," at the start of the line for the public key you wish to copy over. Press ",(0,i.kt)("inlineCode",{parentName:"p"},"$")," to move the cursor to the end of the line; doing so highlights the entire line. Press ",(0,i.kt)("inlineCode",{parentName:"p"},"y")," to yank (copy). Then exit the file using ",(0,i.kt)("inlineCode",{parentName:"p"},":q!"),"."),(0,i.kt)("p",{parentName:"admonition"},"Enter the destination ",(0,i.kt)("inlineCode",{parentName:"p"},"authorized_keys")," file. Press ",(0,i.kt)("inlineCode",{parentName:"p"},"p")," to paste what you yanked.")),(0,i.kt)("h3",{id:"disable-password-authentication"},"Disable Password Authentication"),(0,i.kt)("p",null,"As it is assumed that you logged into your root account using SSH key, this step could be unnecessary. However, do still perform a check to verify that ",(0,i.kt)("inlineCode",{parentName:"p"},"PasswordAuthentication no")," is in place."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Open ",(0,i.kt)("inlineCode",{parentName:"li"},"sshd_config")," with Vim:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo vim /etc/ssh/sshd_config\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Add ",(0,i.kt)("inlineCode",{parentName:"li"},"PasswordAuthentication no"),". It might be commented out as ",(0,i.kt)("inlineCode",{parentName:"li"},"#PasswordAuthentication no")," or written as ",(0,i.kt)("inlineCode",{parentName:"li"},"PasswordAuthentication yes"),". If you find either, replace with ",(0,i.kt)("inlineCode",{parentName:"li"},"PasswordAuthentication no"),". Else just add it in.")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Use ",(0,i.kt)("inlineCode",{parentName:"p"},":/PasswordAuthentication")," to find ",(0,i.kt)("inlineCode",{parentName:"p"},"#PasswordAuthentication no"),".")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Save the file with ",(0,i.kt)("inlineCode",{parentName:"p"},":wq!"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Restart ",(0,i.kt)("inlineCode",{parentName:"p"},"ssh")," to implement this change:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl restart ssh\n")),(0,i.kt)("h2",{id:"basic-firewall"},"Basic Firewall"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"List application profiles registered with ufw firewall:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo ufw app list\n")),(0,i.kt)("p",null,"You should see"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Available applications:\n  OpenSSH\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Ensure the firewall allows SSH connections:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo ufw allow OpenSSH\nsudo ufw enable # Enable firewall\nsudo ufw status # Check if OpenSSH is allowed\n")),(0,i.kt)("p",null,"You should see the following after executing ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo ufw status"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"To                         Action      From\n--                         ------      ----\nOpenSSH                    ALLOW       Anywhere\nOpenSSH (v6)               ALLOW       Anywhere (v6)\n")),(0,i.kt)("h2",{id:"resources"},"Resources"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://digipie.github.io/digidocs/os/ubuntu18-04/"},"Original copy of this document at DigiDocs")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04"},"Initial Server Setup with Ubuntu 18.04")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys-on-ubuntu-1804"},"How to Set Up SSH Keys on Ubuntu 18.04 "))))}m.isMDXComponent=!0}}]);